{{/*  {{- .Page.Path -}}  */}}
{{- $page := .Site.GetPage "/specs-defs/specs/new/bicep/resource" -}}
{{- $page.RenderShortcodes -}}
{{- $content := $page.Content -}}
{{- $headings := findRE `(?is)<h[1-4].*?>.*?</h[1-4]>` $content -}}

<div class="toc-all">
  <h2>Table of Contents</h2>
  <ul >
    {{- range $headings -}}
      {{- $level := substr . 2 1 | int -}}
      {{- $level = sub $level 1 -}}
      {{- $text := replaceRE `(?is)<h[1-6].*?>(.*?)</h[1-6]>` "$1" . | plainify -}}
      {{- $id := anchorize $text -}}
      <li class="toc-level-{{- $level -}}">
        <a href="#{{ $id }}">{{ $text }}</a>
      </li>
      {{/*  {{- if eq $level 2 -}}
        <li><a href="#{{ $id }}">{{ $text }}</a></li>
      {{- else if eq $level 3 -}}
        <ul><li><a href="#{{ $id }}">{{ $text }}</a></li></ul>
      {{- else if eq $level 4 -}}
        <ul><ul><li><a href="#{{ $id }}">{{ $text }}</a></li></ul></ul>
      {{- else if eq $level 5 -}}
        <ul><ul><ul><li><a href="#{{ $id }}">{{ $text }}</a></li></ul></ul></ul>
      {{- else if eq $level 6 -}}
        <ul><ul><ul><ul><li><a href="#{{ $id }}">{{ $text }}</a></li></ul></ul></ul></ul>
      {{- else if eq $level 7 -}}
        <ul><ul><ul><ul><ul><li><a href="#{{ $id }}">{{ $text }}</a></li></ul></ul></ul></ul></ul>
      {{- end -}}  */}}

    {{- end -}}
  </ul>
</div>
